{% extends "cartridges/base.html" %}

{% block title %}–ì–ª–∞–≤–Ω–∞—è{% endblock %}

{% block content %}
<div class="row g-4">
    <!-- –¢–∞–±–ª–∏—Ü–∞ –∫–∞—Ä—Ç—Ä–∏–¥–∂–µ–π -->
    <div class="col-md-12">
        <h2>–ö–∞—Ä—Ç—Ä–∏–¥–∂–∏ –Ω–∞ —Å–∫–ª–∞–¥–µ</h2>
        <table class="table table-striped table-hover align-middle">
            <thead class="table-dark">
            <tr>
                <th>–ê—Ä—Ç–∏–∫—É–ª</th>
                <th>–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ</th>
                <th>–ú–∏–Ω. –æ—Å—Ç–∞—Ç–æ–∫</th>
                <th>–û—Å—Ç–∞—Ç–æ–∫</th>
            </tr>
            </thead>
            <tbody>
            {% for cartridge in cartridges %}
            <tr>
                <td><code>{{ cartridge.article }}</code></td>
                <td>{{ cartridge.name }}</td>
                <td>{{ cartridge.min_stock|default:0 }}</td>
                <td>{{ cartridge.current_stock|default:0 }}</td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="4" class="text-center">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö</td>
            </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π -->
    <div class="col-md-12 mb-4">
        <h2>–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h2>
        <div class="btn-group w-100 gap-3" role="group">
            <a href="{% url 'add_arrival' %}" class="btn btn-outline-success btn-lg">
                üì• –ü—Ä–∏—Ö–æ–¥
            </a>
            <a href="#" class="btn btn-outline-danger btn-lg">
                üì§ –†–∞—Å—Ö–æ–¥
            </a>
            <a href="#" class="btn btn-outline-warning btn-lg text-white">
                üîç –ò–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏—è
            </a>
        </div>
    </div>

    <!-- –ü–æ—Å–ª–µ–¥–Ω–∏–µ —Å–ø–∏—Å–∞–Ω–∏—è -->
    <div class="col-md-12 mt-4">
        <h2>–ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏</h2>
        {% if records %}
        <table class="table table-bordered table-hover">
            <thead class="table-secondary">
            <tr>
                <th>–î–∞—Ç–∞</th>
                <th>–ö–∞—Ä—Ç—Ä–∏–¥–∂</th>
                <th>–ü—Ä–∏–Ω—Ç–µ—Ä</th>
                <th>–û—Ç–¥–µ–ª</th>
                <th>–ö–æ–ª-–≤–æ</th>
            </tr>
            </thead>
            <tbody>
            {% for record in records %}
            <tr>
                <td>{{ record.date_used|date:"d.m.Y" }}</td>
                <td>{{ record.cartridge }}</td>
                <td>{{ record.printer.name }}</td>
                <td>{{ record.printer.department }}</td>
                <td class="text-center">{{ record.quantity }}</td>
            </tr>
            {% endfor %}
            </tbody>
        </table>
        {% else %}
        <p class="text-muted">–ù–µ—Ç –∑–∞–ø–∏—Å–µ–π</p>
        {% endif %}
    </div>

    <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –∑–∞–∫–∞–∑–µ -->
    {% if low_stock_count > 0 %}
    <div class="col-md-12">
        <div class="alert alert-warning mt-3" role="alert">
            <strong>–í–Ω–∏–º–∞–Ω–∏–µ!</strong> –ù—É–∂–Ω–æ –∑–∞–∫–∞–∑–∞—Ç—å {{ low_stock_count }} —Ç–∏–ø(–æ–≤) –∫–∞—Ä—Ç—Ä–∏–¥–∂–µ–π.
            <a href="{% url 'reference' %}" class="alert-link">–ü–µ—Ä–µ–π—Ç–∏ –∫ –∑–∞–∫–∞–∑—É</a>
        </div>
    </div>
    {% endif %}
</div>
{% endblock %}