{% extends "cartridges/base.html" %}

{% block title %}–ì–ª–∞–≤–Ω–∞—è{% endblock %}

{% block content %}
<div class="row g-4">
    <!-- –¢–∞–±–ª–∏—Ü–∞ –∫–∞—Ä—Ç—Ä–∏–¥–∂–µ–π -->
    <div class="col-md-12">
        <h2>–ö–∞—Ä—Ç—Ä–∏–¥–∂–∏ –Ω–∞ —Å–∫–ª–∞–¥–µ</h2>
        <table class="table table-striped table-hover align-middle">
            <thead class="table-dark">
            <tr>
                <th>–ê—Ä—Ç–∏–∫—É–ª</th>
                <th>–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ</th>
                <th>–ú–∏–Ω. –æ—Å—Ç–∞—Ç–æ–∫</th>
                <th>–û—Å—Ç–∞—Ç–æ–∫</th>
            </tr>
            </thead>
            <tbody>
            {% for cartridge in cartridges %}
            <tr>
                <td><code>{{ cartridge.article }}</code></td>
                <td>{{ cartridge.name }}</td>
                <td>{{ cartridge.min_stock }}</td>
                <td>{{ cartridge.current_stock }}</td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="4" class="text-center">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö</td>
            </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- –ö–Ω–æ–ø–∫–∏ –æ–ø–µ—Ä–∞—Ü–∏–π -->
    <div class="col-md-12">
        <h2>–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h2>
        <div class="btn-group w-100" role="group">
            <button type="button" class="btn btn-outline-success btn-lg" data-bs-toggle="modal" data-bs-target="#arrivalModal">
                üì• –ü—Ä–∏—Ö–æ–¥
            </button>
            <button type="button" class="btn btn-outline-danger btn-lg" data-bs-toggle="modal" data-bs-target="#usageModal">
                üì§ –†–∞—Å—Ö–æ–¥
            </button>
            <button type="button" class="btn btn-outline-warning btn-lg" data-bs-toggle="modal" data-bs-target="#inventoryModal">
                üîç –ò–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏—è
            </button>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ: –ü—Ä–∏—Ö–æ–¥ -->
    <div class="modal fade" id="arrivalModal" tabindex="-1" aria-labelledby="arrivalModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="arrivalModalLabel">–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏—Ö–æ–¥ –∫–∞—Ä—Ç—Ä–∏–¥–∂–µ–π</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form method="post">
                        {% csrf_token %}
                        <!-- –ó–¥–µ—Å—å –±—É–¥–µ—Ç —Ñ–æ—Ä–º–∞ –ø—Ä–∏—Ö–æ–¥–∞ -->
                        <p>–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ä—Ç—Ä–∏–¥–∂ –∏ —É–∫–∞–∂–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ.</p>
                        <button type="submit" class="btn btn-success">–ü—Ä–∏–Ω—è—Ç—å</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ: –†–∞—Å—Ö–æ–¥ -->
    <div class="modal fade" id="usageModal" tabindex="-1" aria-labelledby="usageModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="usageModalLabel">–î–æ–±–∞–≤–∏—Ç—å —Ä–∞—Å—Ö–æ–¥ –∫–∞—Ä—Ç—Ä–∏–¥–∂–µ–π</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form method="post">
                        {% csrf_token %}
                        <!-- –ó–¥–µ—Å—å –±—É–¥–µ—Ç —Ñ–æ—Ä–º–∞ —Ä–∞—Å—Ö–æ–¥–∞ -->
                        <p>–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∏–Ω—Ç–µ—Ä, –∫–∞—Ä—Ç—Ä–∏–¥–∂ –∏ —É–∫–∞–∂–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ.</p>
                        <button type="submit" class="btn btn-danger">–°–ø–∏—Å–∞—Ç—å</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ: –ò–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏—è -->
    <div class="modal fade" id="inventoryModal" tabindex="-1" aria-labelledby="inventoryModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="inventoryModalLabel">–ò–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏—è</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form method="post">
                        {% csrf_token %}
                        <!-- –ó–¥–µ—Å—å –±—É–¥–µ—Ç —Ñ–æ—Ä–º–∞ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏–∏ -->
                        <p>–û–±–Ω–æ–≤–∏—Ç–µ –æ—Å—Ç–∞—Ç–∫–∏ –ø–æ –∫–∞–∂–¥–æ–º—É –∫–∞—Ä—Ç—Ä–∏–¥–∂—É.</p>
                        <button type="submit" class="btn btn-warning">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –∑–∞–∫–∞–∑–µ -->
    {% with low_stock_count=cartridges|length %}
    {% if low_stock_count > 0 %}
    <div class="alert alert-warning mt-3" role="alert">
        <strong>–í–Ω–∏–º–∞–Ω–∏–µ!</strong> –ù—É–∂–Ω–æ –∑–∞–∫–∞–∑–∞—Ç—å {{ low_stock_count }} —Ç–∏–ø(–æ–≤) –∫–∞—Ä—Ç—Ä–∏–¥–∂–µ–π.
        <a href="{% url 'order' %}" class="alert-link">–ü–µ—Ä–µ–π—Ç–∏ –∫ –∑–∞–∫–∞–∑—É</a>
    </div>
    {% endif %}
    {% endwith %}
</div>
{% endblock %}